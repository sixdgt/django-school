{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}Student Form{% endblock %}

{% block content %}
<section class="container py-5">
    <div class="row d-flex justify-content-center align-items-center">
        <div class="col-12 col-md-12 col-lg-12 col-xl-12">
            <div class="card shadow-2-strong" style="border-radius: 1rem;">
                <div class="card-body p-5 text-center">
                    <h1>{{ form.instance.pk|yesno:"Edit Student,Add Student" }}</h1>

    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {% for error in form.non_field_errors %}
                {{ error }}
            {% endfor %}
        </div>
    {% endif %}

    <form method="post" novalidate>
        {% csrf_token %}
        
        <div class="row">
            <div class="col-md-6">
                <h3 class="mb-3">Student Information</h3>
                <div class="mb-3">
                    {{ form.first_name.label_tag }}
                    {{ form.first_name|add_class:"form-control"|attr:"required" }}
                    {% if form.first_name.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.first_name.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.last_name.label_tag }}
                    {{ form.last_name|add_class:"form-control"|attr:"required" }}
                    {% if form.last_name.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.last_name.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.date_of_birth.label_tag }}
                    {{ form.date_of_birth|add_class:"form-control"|attr:"type:date"|attr:"required" }}
                    {% if form.date_of_birth.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.date_of_birth.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.gender.label_tag }}
                    {{ form.gender|add_class:"form-select"|attr:"required" }}
                    {% if form.gender.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.gender.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.phone.label_tag }}
                    {{ form.phone|add_class:"form-control"|attr:"pattern:[0-9]{10}"|attr:"title:Please enter exactly 10 digits"|attr:"required" }}
                    {% if form.phone.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.phone.errors }}
                        </div>
                    {% endif %}
                    <small class="form-text text-muted">Enter exactly 10 digits</small>
                </div>
            </div>

            <div class="col-md-6">
                <h3 class="mb-3">Address Information</h3>
                <div class="mb-3">
                    {{ form.address.label_tag }}
                    {{ form.address|add_class:"form-control"|attr:"required" }}
                    {% if form.address.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.address.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.city.label_tag }}
                    {{ form.city|add_class:"form-control"|attr:"required" }}
                    {% if form.city.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.city.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.state.label_tag }}
                    {{ form.state|add_class:"form-control"|attr:"required" }}
                    {% if form.state.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.state.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.zip_code.label_tag }}
                    {{ form.zip_code|add_class:"form-control"|attr:"pattern:[0-9]{5}"|attr:"title:Please enter exactly 5 digits"|attr:"required" }}
                    {% if form.zip_code.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.zip_code.errors }}
                        </div>
                    {% endif %}
                    <small class="form-text text-muted">Enter exactly 5 digits</small>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <h3 class="mb-3">Parent Information</h3>
                <div class="mb-3">
                    {{ form.parent_name.label_tag }}
                    {{ form.parent_name|add_class:"form-control"|attr:"required" }}
                    {% if form.parent_name.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.parent_name.errors }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.parent_phone.label_tag }}
                    {{ form.parent_phone|add_class:"form-control"|attr:"pattern:[0-9]{10}"|attr:"title:Please enter exactly 10 digits"|attr:"required" }}
                    {% if form.parent_phone.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.parent_phone.errors }}
                        </div>
                    {% endif %}
                    <small class="form-text text-muted">Enter exactly 10 digits</small>
                </div>
                <div class="mb-3">
                    {{ form.parent_email.label_tag }}
                    {{ form.parent_email|add_class:"form-control"|attr:"type:email"|attr:"required" }}
                    {% if form.parent_email.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.parent_email.errors }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="col-md-6">
                <h3 class="mb-3">School Information</h3>
                <div class="mb-3">
                    {{ form.school.label_tag }}
                    {{ form.school|add_class:"form-select"|attr:"required" }}
                    {% if form.school.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.school.errors }}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="mt-4">
            <button type="submit" class="btn btn-success">Save</button>
            <a href="{% url 'student.index' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
